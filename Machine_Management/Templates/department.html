<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Maintenance Management</title>


    {% load static %}
    <!-- Font Awesome -->
    <link rel="stylesheet" type="text/css" href="{% static 'iconfont/all.css' %}">
    <!-- icon -->
    <link rel="stylesheet" type="text/css" href="{% static 'iconfont/material-icons.css' %}">
    <!-- Fonts -->
    <link rel="stylesheet" type="text/css" href="{% static 'fonts/fonts.css' %}">
    <!-- Multiselect -->
    <link href="{% static 'style/multi-select.css' %}" media="screen" rel="stylesheet" type="text/css">

    <!--  Popper  -->
    <script src="{% static 'javascript/popper-1.16.1.min.js' %}"></script>
    <!-- Jquery   -->
    <script src="{% static 'javascript/jquery-3.5.1.min.js' %}"></script>
    <!-- Bootstrap 4.5.3 -->
    <link rel="stylesheet" type="text/css" href="{% static 'style/bootstrap.min.css' %}">
    <script src="{% static 'javascript/bootstrap-4.5.2.min.js' %}"></script>
    <!-- DataTable   -->
    <link rel="stylesheet" type="text/css" href="{% static 'style/jquery.dataTables-1.10.19.min.css' %}">
    <script src="{% static 'javascript/jquery.dataTables.min.js' %}"></script>
    <!-- Moment   -->
    <script src="{% static 'javascript/moment-2.29.0.min.js' %}"></script>
    <!-- Input Date Format  DD/MM/YYYY -->
    <link rel="stylesheet" type="text/css" href="{% static 'style/input_date.css' %}">
    <!-- Create Avatar -->
    <script src="{% static 'javascript/avatar.js' %}"></script>
    <!-- Container Form -->
    <link rel="stylesheet" type="text/css" href="{% static 'style/container-fluid.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'style/department.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'style/form-group.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'style/switch.css' %}">
    <!-- bootstrap-select -->
    <script src="{% static 'javascript/bootstrap-select.min.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'style/bootstrap-select.min.css' %}">



</head>
<body>

<div class="container-fluid">
    <nav class="navbar navbar-expand-md navbar-light" style="background-color: #f5f5f5;">
        <a href="{% url 'home' %}" class="navbar-brand">
            <img src="/static/img/farmhouse_logo copy.gif" height="65" alt="CoolBrand">
        </a>
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
            <div class="navbar-nav">
                <a href="#" class="nav-item nav-link active"><b>Department Management</b></a>
            </div>
            <form method="POST" action="{% url 'signin' %}">
                {% csrf_token %}
                <ul class="nav navbar-nav ml-auto">
                    <a href="#" class="nav-item nav-link" style="color:#B22222">{{User_login.username}}</a>
                    <button type="submit" class="btn btn-outline-secondary" name="signout" >Sign out</button>
                </ul>
            </form>
        </div>
    </nav>
</div>
<div class="container-fluid">
    <div class="table-responsive">
        {% for message in messages %}
        <div class="alert {{ message.tags }} ">
            <span class="closebtn" onclick="this.parentElement.style.display='none';" style="color: #454545; font-size: 36px;">&times;</span>
            {{ message }}
        </div>
        {% endfor %}
        <div class="table-wrapper">
            <div class="table-title">
                <div class="row">
                    <div class="col-sm-5">
                        <h2>Department <b>Management</b></h2>
                    </div>
                    
                    <div class="col-sm-7">
                        <a href="#newDepartment" class="btn btn-secondary" data-toggle="modal"><i class="material-icons">&#xE147;</i> <span>New Department</span></a>
                    </div>
                </div>
            </div>

            <div class="department-tab" style="margin-bottom: 10px;">
                <ul class="nav nav-tabs nav-fill" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="departmants-tab" data-toggle="tab" href="#departmants-body" role="tab" aria-controls="departmants-body" aria-selected="true">Departmants</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="members-tab" data-toggle="tab" href="#members-body" role="tab" aria-controls="members-body" aria-selected="false">Members</a>
                    </li>
                </ul>
            </div>
            <div class="tab-content" id="TabContent">
                <div class="tab-pane fade show active" id="departmants-body" role="tabpanel" aria-labelledby="departmants-tab">
                    <table class="table table-striped table-hover" id="myTable">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th style="width:20%">Department ID</th>
                                <th style="width:30%">Department Name</th>
                                <th style="width:40% ">Members</th>
                                <th style="width:10%"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td></td>
                                <td></td>
                                <td>
                                    <ul class="avatars">
                                        {% for user in test_user %}
                                            {% if forloop.counter <= 5 %}
                                            <li>
                                                <a href="#members" data-toggle="modal"><img class="avatar-list" avatar="{{ user.firstname }} {{ user.lastname }}" data-toggle="tooltip" title="{{ user.firstname }} {{ user.lastname }}"></a>
                                            </li>
                                            {% elif forloop.counter == test_user.count %}
                                            <li>
                                                <a href="#members" data-toggle="modal"><span class="more-member">+{{ test_user.count|add:"-5" }}</span></a>
                                            </li>
                                            {% endif %}
                                        {% endfor %}
                                    </ul>
                                </td>
                                <td>
                                    <a href="#editDepartment" class="settings" title="Settings" data-toggle="modal" ><i class="material-icons">&#xE8B8;</i></a>
                                </td>
                            </tr>
                            <!-- Modal Members -->
                            <div id="members" class="modal fade" tabindex="-1">
                                <div class="modal-dialog modal-lg">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">Members</h5>
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="row">
                                                {% for user in test_user %}
                                                    {% if forloop.counter|divisibleby:2 %}
                                                    <div class="col-6">
                                                        <div class="member-detial">
                                                            <img class="lettet-avatar" avatar="{{ user.firstname }} {{ user.lastname }}">
                                                            <div class="member-detial-body">
                                                                <h6 class="mb-0 H6-filter-by-text" data-filter-by="text">{{ user.firstname }} {{ user.lastname }}</h6>
                                                                <span data-filter-by="text" class="text-body SPAN-filter-by-text">{{ user.org.org_name }}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% else %}
                                                    <div class="col-6">
                                                        <div class="member-detial">
                                                            <img class="lettet-avatar" avatar="{{ user.firstname }} {{ user.lastname }}">
                                                            <div class="member-detial-body">
                                                                <h6 class="mb-0 H6-filter-by-text" data-filter-by="text">{{ user.firstname }} {{ user.lastname }}</h6>
                                                                <span data-filter-by="text" class="text-body SPAN-filter-by-text">{{ user.org.org_name }}</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% endif %}
                                                {% endfor %}
                                            </div>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane fade" id="members-body" role="tabpanel" aria-labelledby="members-tab">
                    <table class="table table-striped table-hover" id="myTable1">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Username</th>
                                <th>Full name</th>
                                <th>Role</th>
                                <th>Organize</th>
                                <th>Department</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td><img src="/static/img/avatar.svg" class="avatar" alt="Avatar">001016</td>
                                <td>{{user.firstname}} {{user.lastname}}</td>
                                <td>{{user.role}}</td>
                                <td>{{user.org}}</td>
                                <td>{{user.create_date}}</td>
                                <td>
                                    <a href="#edit" class="settings" title="Settings" data-toggle="modal"><i class="material-icons">&#xE8B8;</i></a>
                                    <!-- <a href="#delete{{user.username}}" class="delete" title="Delete" data-toggle="modal"><i class="material-icons">&#xE5C9;</i></a> -->
                                </td>
                            </tr>
                            
                        </tbody>
                    </table>
                </div>
                <!-- Modal New Department -->
                <div id="newDepartment" class="modal fade" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-content">
                                <form method="post">
                                    {% csrf_token %}
                                    <div class="modal-header">
                                        <h5 class="modal-title">New Department</h5>
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        <h6 style="font-size: 17px; color: #212529; margin-top: 0.75rem; margin-bottom: 0.75rem;">Details</h6>
                                        <div class="row new-department-form">
                                            <label class="col-3">Code</label>
                                            <input class="form-control col" type="text" placeholder="Department Code" name="department-code">
                                        </div>
                                        <div class="row new-department-form">
                                            <label class="col-3">Name</label>
                                            <input class="form-control col" type="text" placeholder="Department Name" name="department-name">
                                        </div>    
                                        <hr>
                                        <h6 style="font-size: 17px; color: #212529; margin-bottom: 0.75rem;">Members</h6>
                                        <div class="row new-department-form">
                                            <label class="col-3">Organize</label>
                                            <select class="selectpicker" id="select-org" data-width="75%" multiple data-actions-box="true">
                                                {% for org in orgs %}
                                                <option value="{{ org.org_id }}">{{ org.org_name }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="row new-department-form">
                                            <label class="col-3">User</label>
                                            <select class="selectpicker select-user" id="select-user" name="select-user" data-width="75%" multiple data-actions-box="true"></select>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-primary" name="addMembersDepartment">Create Department</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal Edit Department's member -->
                <div id="editDepartment" class="modal fade" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <form method="POST">
                            {% csrf_token %}
                            <div class="modal-header">
                                <h5 class="modal-title">Edit Department's member</h5>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                
                                <div class="row">
                                    <div class="col align-self-end">
                                        <button type="button" class="btn btn-primary add-new" style="float: right;" data-toggle="collapse" data-target="#add-more-members" aria-expanded="false" aria-controls="add-more-members"><i class="fas fa-user-plus"></i> Add New Member</button>
                                    </div>
                                </div>
                                <div class="collapse" id="add-more-members">
                                    <div class="card card-body card-more-member">
                                        <h6 style="font-size: 17px; color: #212529; margin-bottom: 0.75rem;">Members</h6>
                                        <div class="row new-department-form">
                                            <label class="col-3">Organize</label>
                                            <select class="selectpicker" id="more-member-department" data-width="75%" multiple data-actions-box="true">
                                                {% for org in orgs %}
                                                <option value="{{ org.org_id }}">{{ org.org_name }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="row new-department-form">
                                            <label class="col-3">User</label>
                                            <select class="selectpicker" id="more-members" name="more-members" data-width="75%" multiple data-actions-box="true"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="group-users">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" class="custom-control-input" id="project-user-1" value="Keita Machida">
                                        <label class="custom-control-label" for="project-user-1">
                                            <span class="d-flex align-items-center">
                                                <img class="lettet-avatar mr-2" avatar="Keita Machida">
                                                <span class="h6 mb-0 SPAN-filter-by-text" data-filter-by="text">Keita Machida</span>
                                            </span>
                                        </label>
                                  </div><div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="project-user-3" value="Akaso Eiji">
                                    <label class="custom-control-label" for="project-user-3">
                                      <span class="d-flex align-items-center">
                                        <img class="lettet-avatar mr-2" avatar="Akaso Eiji">
                                        <span class="h6 mb-0 SPAN-filter-by-text" data-filter-by="text">Akaso Eiji</span>
                                      </span>
                                    </label>
                                  </div><div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="project-user-2" value="Marcus Simmons">
                                    <label class="custom-control-label" for="project-user-2">
                                      <span class="d-flex align-items-center">
                                        <img class="lettet-avatar mr-2" avatar="Marcus Simmons">
                                        <span class="h6 mb-0 SPAN-filter-by-text" data-filter-by="text">Marcus Simmons</span>
                                      </span>
                                    </label>
                                  </div><div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="project-user-4" value="Harry Xai">
                                    <label class="custom-control-label" for="project-user-4">
                                      <span class="d-flex align-items-center">
                                        <img class="lettet-avatar mr-2" avatar="Harry Xai">
                                        <span class="h6 mb-0 SPAN-filter-by-text" data-filter-by="text">Harry Xai</span>
                                      </span>
                                    </label>
                                  </div><div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="project-user-5" value="Sally Harpe">
                                    <label class="custom-control-label" for="project-user-5">
                                      <span class="d-flex align-items-center">
                                        <img class="lettet-avatar mr-2" avatar="Sally Harper">
                                        <span class="h6 mb-0 SPAN-filter-by-text" data-filter-by="text">Sally Harper</span>
                                      </span>
                                    </label>
                                  </div><div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="project-user-6" value="Ravi Singh">
                                    <label class="custom-control-label" for="project-user-6">
                                      <span class="d-flex align-items-center">
                                        <img class="lettet-avatar mr-2" avatar="Ravi Singh">
                                        <span class="h6 mb-0 SPAN-filter-by-text" data-filter-by="text">Ravi Singh</span>
                                      </span>
                                    </label>
                                  </div><div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="project-user-7" value="Kristina Van Der Stroem">
                                    <label class="custom-control-label" for="project-user-7">
                                      <span class="d-flex align-items-center">
                                        <img class="lettet-avatar mr-2" avatar="Kristina Van Der Stroem">
                                        <span class="h6 mb-0 SPAN-filter-by-text" data-filter-by="text">Kristina Van Der Stroem</span>
                                      </span>
                                    </label>
                                  </div><div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="project-user-8" value="David Whittaker">
                                    <label class="custom-control-label" for="project-user-8">
                                      <span class="d-flex align-items-center">
                                        <img class="lettet-avatar mr-2" avatar="David Whittaker">
                                        <span class="h6 mb-0 SPAN-filter-by-text" data-filter-by="text">David Whittaker</span>
                                      </span>
                                    </label>
                                  </div><div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="project-user-9" value="Kerri-Anne Banks">
                                    <label class="custom-control-label" for="project-user-9">
                                      <span class="d-flex align-items-center">
                                        <img class="lettet-avatar mr-2" avatar="Kerri-Anne Banks">
                                        <span class="h6 mb-0 SPAN-filter-by-text" data-filter-by="text">Kerri-Anne Banks</span>
                                      </span>
                                    </label>
                                  </div><div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="project-user-10" value="Masimba Sibanda">
                                    <label class="custom-control-label" for="project-user-10">
                                      <span class="d-flex align-items-center">
                                        <img class="lettet-avatar mr-2" avatar="Masimba Sibanda">
                                        <span class="h6 mb-0 SPAN-filter-by-text" data-filter-by="text">Masimba Sibanda</span>
                                      </span>
                                    </label>
                                  </div><div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="project-user-11" value="Krishna Bajaj">
                                    <label class="custom-control-label" for="project-user-11">
                                      <span class="d-flex align-items-center">
                                        <img class="lettet-avatar mr-2" avatar="Krishna Bajaj">
                                        <span class="h6 mb-0 SPAN-filter-by-text" data-filter-by="text">Krishna Bajaj</span>
                                      </span>
                                    </label>
                                  </div><div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="project-user-12" value="Kenny Tran">
                                    <label class="custom-control-label" for="project-user-12">
                                      <span class="d-flex align-items-center">
                                        <img class="lettet-avatar mr-2" avatar="Kenny Tran">
                                        <span class="h6 mb-0 SPAN-filter-by-text" data-filter-by="text">Kenny Tran</span>
                                      </span>
                                    </label>
                                  </div>
                                  <div class="delete-members" style="text-align:center;">
                                    <a class="btn delete" id="delete-member" >
                                        <i class="fas fa-trash-alt"></i> Remove user from department
                                    </a>
                                </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn btn-primary">Save changes</button>
                            </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Modal Edit User's permission -->
                <div id="edit" class="modal fade" tabindex="-1">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Permissions</h5>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div>
                                    <table class="table table-striped permission-table">
                                        <thead>
                                          <tr>
                                            <th style="width:20%"></th>
                                            <th style="width:10%"><center>Inform</center></th>
                                            <th style="width:10%"><center>Inspect</center></th>
                                            <th style="width:10%"><center>Approve</center></th>
                                            <th style="width:10%"><center>Recieve</center></th>
                                            <th style="width:10%"><center>Assign</center></th>
                                            <th style="width:10%"><center>Report</center></th>
                                            <th style="width:10%"><center>Verify</center></th>
                                            <th style="width:10%"><center>Close</center></th>
                                          </tr>
                                        </thead>
                                        <tbody>
                                          <tr>
                                            <td><b>Departmant XXX</b></td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                          </tr>
                                          <tr>
                                            <td><b>Departmant YYY</b></td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                            <td><center>
                                                <label class="checkbox-label">
                                                    <input type="checkbox">
                                                    <span class="checkbox-custom circular"></span>
                                                </label>
                                                </center>
                                            </td>
                                          </tr>

                                        </tbody>
                                      </table>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary">Save changes</button>
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

</div>

<script src="{% static 'javascript/avatar.js' %}" type="text/javascript"></script>
<script>
    $(document).ready( function () {
        $('#myTable').DataTable();
        $('#myTable1').DataTable();
    } );
</script>
<script>
    $(document).ready(function(){
        $('[data-toggle="tooltip"]').tooltip();
    });
</script>
<script src="{% static 'javascript/input_date.js'%}"></script>
<script>
    $('#select-org').change(function () {
        var selectedItem = $('#select-org').selectpicker('val');
        console.log(selectedItem);
        var selected = JSON.stringify(selectedItem);
        $.ajax({
            type: 'GET',
            url: "{% url 'ajax_load_user' %}",
            data: {
                'orglist': selectedItem
            },
            dataType: 'json',
            success: function(data) {
                var i;
                console.log("data : ",data);
                document.getElementById("select-user").innerHTML = null;
                for (i in data) {
                    console.log(data[i].pk);
                    console.log(data[i].fields.firstname, data[i].fields.lastname);
                    var x = document.getElementById("select-user");
                    var option = document.createElement("option");
                    option.text = data[i].fields.firstname, data[i].fields.lastname;
                    x.add(option);
                }
                $("#select-user").selectpicker("refresh");
            }
        });
    });
    $('#more-member-department').change(function () {
        var selectedItem = $('#more-member-department').selectpicker('val');

        console.log(selectedItem);
        var selected = JSON.stringify(selectedItem);
        $.ajax({
            type: 'GET',
            url: "{% url 'ajax_load_user' %}",
            data: {
                'orglist': selectedItem
            },
            dataType: 'json',
            success: function(data) {
                var i;
                console.log("data : ",data);
                document.getElementById("more-members").innerHTML = null;
                for (i in data) {
                    console.log(data[i].pk);
                    console.log(data[i].fields.firstname, data[i].fields.lastname);
                    var x = document.getElementById("more-members");
                    var option = document.createElement("option");
                    option.text = data[i].fields.firstname, data[i].fields.lastname;
                    x.add(option);
                }
                $("#more-members").selectpicker("refresh");
            }
        });
    });
</script>
<script>
    // Remove Member Button
    $(document).ready(function(){
        $('#delete-member').click(function(e){
            var deletedlist = [];
            var id = document.getElementById('delete-member');
            e.preventDefault();

            $(".custom-control input:checked").each(function(){
                deletedlist.push($(this).val());
            });
            // console.log(deletedlist);
            var removed_members = JSON.stringify(deletedlist);
            
            $.ajax({
                method : "POST",
                url: "{% url 'removed_members' %}",
                data: {
                    'removed_members': removed_members
                },
                success: function (data) {
                }
            });
            console.log(1);
            $(".custom-control input:checked").parent().remove();
        });
    });

	

</script>
<script>
    // Remove Member Button
        function delete_user_department(element){
            console.log(element);
            var deletedlist = [];

            $(".custom-control input:checked").each(function(){
                deletedlist.push($(this).val());
            });

            var removed_members = JSON.stringify(deletedlist);
            
            $.ajax({
                method : "POST",
                url: "{% url 'removed_members' %}",
                data: {
                    
                    'removed_members': removed_members
                }
            });
            
            console.log(1);
            $(".custom-control input:checked").parent().remove();
        };
</script>
</body>
</html>
